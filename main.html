<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Neon Studio</title>
    <link href="main.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Roboto+Mono:100,200,300,400|Roboto:100,200,300,400" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Material+Icons" rel="stylesheet">

    <script src="dependencies/js/jquery.js"></script>
    <script src="nativejsx.js"></script>
    <script src="atomic.js"></script>
    <script src="cssSelectorGen.js"></script>
    <script src="toolbox.js"></script>
    <script src="system.js"></script>
    <script src="mousetrap.js"></script>
    <script src="dset.js"></script>
    <script src="statMonitor.js"></script>
    <script src="buildEngine.js" defer></script>
    <script src="viewbox.js" defer></script>
</head>
<body>
<nav top="" title="Neon Studio">
    <li class="workspace-element control-spacer" showif="platform.mac"> </li>
    <li class="workspace-element" onclick="restart()"><i class="material-icons">keyboard_arrow_left</i></li>
    <li class="workspace-element" onclick="designerCom.undoChanges()"><i class="material-icons">refresh</i></li>
    <li class="workspace-element"><i class="material-icons">save</i></li>
    <li class="workspace-element"><i class="material-icons">note_add</i></li>
    <li class="workspace-element" stickRight><i class="material-icons">arrow_drop_down</i></li>
    <li class="workspace-element" stickRight onclick="system.openSearch();"><i class="material-icons">search</i></li>
    <li class="workspace-element" stickRight onclick="designerCom.undoChanges();"><i class="material-icons">undo</i></li>
</nav>
<nav left="" class="workspace-element">
    <li smartStick><i class="material-icons"  onclick="toolbox.toggle()">dashboard</i></li>
    <li tip="Open DevTools"><i class="material-icons" onclick="system.showDevTool()">info_outline</i></li>
    <li tip="Toggle Device"><i class="material-icons" onclick="system.toggleDevice()">important_devices</i></li>
    <li tip="Ready"><i class="netStatus material-icons">cloud_queue</i></li>
    <li tip="Build status"><i class="buildStat material-icons" id="buildStat">vertical_align_bottom</i></li>
    <li tip="App Views"><i class="material-icons" onclick="viewbox.show()">view_carousel</i></li>
    <li stickBottom><i class="material-icons">build</i></li>
</nav>
<section right="" class="workspace-element">
    <p>Properties</p>
    <atomic-textbox label:html="name"></atomic-textbox>
    <hr>

    <atomic-color label:html="Color"></atomic-color>

    <atomic-search placeholder="box" button:html="boxer"></atomic-search>

    <atomic-unitbox></atomic-unitbox>

    <atomic-drop>
        <li><a href="#" onclick="alert('he')"><i class="icon-user"></i>Profile</a></li>
    <li><a href="#"><i class="icon-cog"></i>Settings</a></li>
    <li><a href="#"><i class="icon-remove"></i>Log out</a></li>
    </atomic-drop>

    <atomic-selectionbox label:html="size"></atomic-selectionbox>

    <atomic-switcher anc:name:html="active"></atomic-switcher>
    <atomic-switcher anc:name:html="close"></atomic-switcher>

    <atomic-range label:html="value"></atomic-range>

    <atomic-inputbox label:html="url"></atomic-inputbox>

</section>
<main>
    <webview id="guestDesigner" nodeIntegration disablewebsecurity src="about:blank"></webview>
</main>
<script src="start.js"></script>
<script>
    function restart(){
        require('electron').remote.app.relaunch();
        require('electron').remote.app.exit(0)
    }

    window.online = false;
    window.previousRound_online = false;
    window.firstRun = true;

    function updateNetworkLoop(v){
        window.previousRound_online = window.online;
        window.online = v;

        if (window.online != window.previousRound_online){
            networkChanged(v);
        }
    }

    function networkChanged(v){
        if (v==1){
            updateCloudStatus('online');
        }
        else{
            updateCloudStatus('offline');
        }
    }

    function updateCloudStatus(state){
        switch (state){
            case 'upToDate':
                $('.netStatus').text('cloud_done').attr('tip','Up to date!');
                break;
            case 'uploading':
                $('.netStatus').text('cloud_upload').attr('tip','Uploading. . .');
                break;
            case 'offline':
                $('.netStatus').text('cloud_off').attr('tip','Offline')
                break;
            case 'fetching':
                $('.netStatus').text('cloud_download').attr('tip','Downloading resouces');
                break;
            default:
                $('.netStatus').text('cloud').attr('tip','Online');
                break;
        }
    }
    function updateBuildStatus(state){
        switch (state){
            default:
                $('#buildStat').removeClass('buildStat').removeClass('working').text('done');
                break;
            case 'settingUp':
                $('#buildStat').addClass('buildStat').removeClass('working').text('vertical_align_bottom');
                break;
            case 'building':
                $('#buildStat').addClass('buildStat').addClass('working').text('loop');
                break;
        }
    }
    net.registerListener(updateNetworkLoop);
</script>
<div blocker></div>
</body>
</html>